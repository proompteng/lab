apiVersion: agents.proompteng.ai/v1alpha1
kind: VersionControlProvider
metadata:
  name: github-app
spec:
  provider: github
  apiBaseUrl: https://api.github.com
  cloneBaseUrl: https://github.com
  webBaseUrl: https://github.com
  auth:
    method: app
    app:
      appId: "12345"
      installationId: "67890"
      privateKeySecretRef:
        name: github-app-private-key
        key: privateKey
  repositoryPolicy:
    allow:
      - proompteng/*
  capabilities:
    read: true
    write: true
    pullRequests: true
  defaults:
    baseBranch: main
    branchTemplate: codex/{{issueNumber}}
    commitAuthorName: codex
    commitAuthorEmail: codex@proompt.com
    pullRequest:
      enabled: true
      draft: false
      titleTemplate: "Codex: {{repository}}"
      bodyTemplate: "Closes #{{issueNumber}}"
