syntax = "proto3";

package proompteng.jangar.v1;

option go_package = "github.com/proompteng/lab/services/jangar/internal/agentctlpb";

service AgentctlService {
  rpc GetServerInfo(GetServerInfoRequest) returns (GetServerInfoResponse);

  rpc ListAgents(ListAgentsRequest) returns (ListAgentsResponse);
  rpc GetAgent(GetAgentRequest) returns (GetAgentResponse);
  rpc ApplyAgent(ApplyAgentRequest) returns (ApplyAgentResponse);
  rpc DeleteAgent(DeleteAgentRequest) returns (DeleteAgentResponse);

  rpc ListAgentProviders(ListAgentProvidersRequest) returns (ListAgentProvidersResponse);
  rpc GetAgentProvider(GetAgentProviderRequest) returns (GetAgentProviderResponse);
  rpc ApplyAgentProvider(ApplyAgentProviderRequest) returns (ApplyAgentProviderResponse);
  rpc DeleteAgentProvider(DeleteAgentProviderRequest) returns (DeleteAgentProviderResponse);

  rpc ListImplementationSpecs(ListImplementationSpecsRequest) returns (ListImplementationSpecsResponse);
  rpc GetImplementationSpec(GetImplementationSpecRequest) returns (GetImplementationSpecResponse);
  rpc ApplyImplementationSpec(ApplyImplementationSpecRequest) returns (ApplyImplementationSpecResponse);
  rpc DeleteImplementationSpec(DeleteImplementationSpecRequest) returns (DeleteImplementationSpecResponse);
  rpc CreateImplementationSpec(CreateImplementationSpecRequest) returns (CreateImplementationSpecResponse);

  rpc ListImplementationSources(ListImplementationSourcesRequest) returns (ListImplementationSourcesResponse);
  rpc GetImplementationSource(GetImplementationSourceRequest) returns (GetImplementationSourceResponse);
  rpc ApplyImplementationSource(ApplyImplementationSourceRequest) returns (ApplyImplementationSourceResponse);
  rpc DeleteImplementationSource(DeleteImplementationSourceRequest) returns (DeleteImplementationSourceResponse);

  rpc ListMemories(ListMemoriesRequest) returns (ListMemoriesResponse);
  rpc GetMemory(GetMemoryRequest) returns (GetMemoryResponse);
  rpc ApplyMemory(ApplyMemoryRequest) returns (ApplyMemoryResponse);
  rpc DeleteMemory(DeleteMemoryRequest) returns (DeleteMemoryResponse);

  rpc ListTools(ListToolsRequest) returns (ListToolsResponse);
  rpc GetTool(GetToolRequest) returns (GetToolResponse);
  rpc ApplyTool(ApplyToolRequest) returns (ApplyToolResponse);
  rpc DeleteTool(DeleteToolRequest) returns (DeleteToolResponse);

  rpc ListToolRuns(ListToolRunsRequest) returns (ListToolRunsResponse);
  rpc GetToolRun(GetToolRunRequest) returns (GetToolRunResponse);
  rpc ApplyToolRun(ApplyToolRunRequest) returns (ApplyToolRunResponse);
  rpc DeleteToolRun(DeleteToolRunRequest) returns (DeleteToolRunResponse);

  rpc ListOrchestrations(ListOrchestrationsRequest) returns (ListOrchestrationsResponse);
  rpc GetOrchestration(GetOrchestrationRequest) returns (GetOrchestrationResponse);
  rpc ApplyOrchestration(ApplyOrchestrationRequest) returns (ApplyOrchestrationResponse);
  rpc DeleteOrchestration(DeleteOrchestrationRequest) returns (DeleteOrchestrationResponse);

  rpc ListOrchestrationRuns(ListOrchestrationRunsRequest) returns (ListOrchestrationRunsResponse);
  rpc GetOrchestrationRun(GetOrchestrationRunRequest) returns (GetOrchestrationRunResponse);
  rpc ApplyOrchestrationRun(ApplyOrchestrationRunRequest) returns (ApplyOrchestrationRunResponse);
  rpc DeleteOrchestrationRun(DeleteOrchestrationRunRequest) returns (DeleteOrchestrationRunResponse);

  rpc ListApprovalPolicies(ListApprovalPoliciesRequest) returns (ListApprovalPoliciesResponse);
  rpc GetApprovalPolicy(GetApprovalPolicyRequest) returns (GetApprovalPolicyResponse);
  rpc ApplyApprovalPolicy(ApplyApprovalPolicyRequest) returns (ApplyApprovalPolicyResponse);
  rpc DeleteApprovalPolicy(DeleteApprovalPolicyRequest) returns (DeleteApprovalPolicyResponse);

  rpc ListBudgets(ListBudgetsRequest) returns (ListBudgetsResponse);
  rpc GetBudget(GetBudgetRequest) returns (GetBudgetResponse);
  rpc ApplyBudget(ApplyBudgetRequest) returns (ApplyBudgetResponse);
  rpc DeleteBudget(DeleteBudgetRequest) returns (DeleteBudgetResponse);

  rpc ListSecretBindings(ListSecretBindingsRequest) returns (ListSecretBindingsResponse);
  rpc GetSecretBinding(GetSecretBindingRequest) returns (GetSecretBindingResponse);
  rpc ApplySecretBinding(ApplySecretBindingRequest) returns (ApplySecretBindingResponse);
  rpc DeleteSecretBinding(DeleteSecretBindingRequest) returns (DeleteSecretBindingResponse);

  rpc ListSignals(ListSignalsRequest) returns (ListSignalsResponse);
  rpc GetSignal(GetSignalRequest) returns (GetSignalResponse);
  rpc ApplySignal(ApplySignalRequest) returns (ApplySignalResponse);
  rpc DeleteSignal(DeleteSignalRequest) returns (DeleteSignalResponse);

  rpc ListSignalDeliveries(ListSignalDeliveriesRequest) returns (ListSignalDeliveriesResponse);
  rpc GetSignalDelivery(GetSignalDeliveryRequest) returns (GetSignalDeliveryResponse);
  rpc ApplySignalDelivery(ApplySignalDeliveryRequest) returns (ApplySignalDeliveryResponse);
  rpc DeleteSignalDelivery(DeleteSignalDeliveryRequest) returns (DeleteSignalDeliveryResponse);

  rpc ListSchedules(ListSchedulesRequest) returns (ListSchedulesResponse);
  rpc GetSchedule(GetScheduleRequest) returns (GetScheduleResponse);
  rpc ApplySchedule(ApplyScheduleRequest) returns (ApplyScheduleResponse);
  rpc DeleteSchedule(DeleteScheduleRequest) returns (DeleteScheduleResponse);

  rpc ListArtifacts(ListArtifactsRequest) returns (ListArtifactsResponse);
  rpc GetArtifact(GetArtifactRequest) returns (GetArtifactResponse);
  rpc ApplyArtifact(ApplyArtifactRequest) returns (ApplyArtifactResponse);
  rpc DeleteArtifact(DeleteArtifactRequest) returns (DeleteArtifactResponse);

  rpc ListWorkspaces(ListWorkspacesRequest) returns (ListWorkspacesResponse);
  rpc GetWorkspace(GetWorkspaceRequest) returns (GetWorkspaceResponse);
  rpc ApplyWorkspace(ApplyWorkspaceRequest) returns (ApplyWorkspaceResponse);
  rpc DeleteWorkspace(DeleteWorkspaceRequest) returns (DeleteWorkspaceResponse);

  rpc ListAgentRuns(ListAgentRunsRequest) returns (ListAgentRunsResponse);
  rpc GetAgentRun(GetAgentRunRequest) returns (GetAgentRunResponse);
  rpc ApplyAgentRun(ApplyAgentRunRequest) returns (ApplyAgentRunResponse);
  rpc DeleteAgentRun(DeleteAgentRunRequest) returns (DeleteAgentRunResponse);

  rpc SubmitAgentRun(SubmitAgentRunRequest) returns (SubmitAgentRunResponse);
  rpc CancelAgentRun(CancelAgentRunRequest) returns (CancelAgentRunResponse);
  rpc StreamAgentRunLogs(StreamAgentRunLogsRequest) returns (stream StreamAgentRunLogsResponse);
}

message GetServerInfoRequest {}

message GetServerInfoResponse {
  string version = 1;
  string build_sha = 2;
  string build_time = 3;
  string service = 4;
}

message ListAgentsRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListAgentsResponse {
  string json = 1;
}

message GetAgentRequest {
  string namespace = 1;
  string name = 2;
}

message GetAgentResponse {
  string json = 1;
}

message ApplyAgentRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyAgentResponse {
  string json = 1;
}

message DeleteAgentRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteAgentResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListAgentProvidersRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListAgentProvidersResponse {
  string json = 1;
}

message GetAgentProviderRequest {
  string namespace = 1;
  string name = 2;
}

message GetAgentProviderResponse {
  string json = 1;
}

message ApplyAgentProviderRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyAgentProviderResponse {
  string json = 1;
}

message DeleteAgentProviderRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteAgentProviderResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListImplementationSpecsRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListImplementationSpecsResponse {
  string json = 1;
}

message GetImplementationSpecRequest {
  string namespace = 1;
  string name = 2;
}

message GetImplementationSpecResponse {
  string json = 1;
}

message ApplyImplementationSpecRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyImplementationSpecResponse {
  string json = 1;
}

message DeleteImplementationSpecRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteImplementationSpecResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ImplementationSourceInput {
  string provider = 1;
  string external_id = 2;
  string url = 3;
}

message CreateImplementationSpecRequest {
  string namespace = 1;
  string text = 2;
  string summary = 3;
  ImplementationSourceInput source = 4;
}

message CreateImplementationSpecResponse {
  string json = 1;
}

message RuntimeConfigEntry {
  string key = 1;
  string value = 2;
}

message WorkloadSpecInput {
  string image = 1;
  string cpu = 2;
  string memory = 3;
}

message SubmitAgentRunRequest {
  string namespace = 1;
  string agent_name = 2;
  string implementation_name = 3;
  string runtime_type = 4;
  repeated RuntimeConfigEntry runtime_config = 5;
  repeated RuntimeConfigEntry parameters = 6;
  string idempotency_key = 7;
  WorkloadSpecInput workload = 8;
  string memory_ref = 9;
}

message SubmitAgentRunResponse {
  string resource_json = 1;
  string record_json = 2;
  bool idempotent = 3;
}

message CancelAgentRunRequest {
  string namespace = 1;
  string name = 2;
}

message CancelAgentRunResponse {
  bool ok = 1;
  string message = 2;
}

message ListImplementationSourcesRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListImplementationSourcesResponse {
  string json = 1;
}

message GetImplementationSourceRequest {
  string namespace = 1;
  string name = 2;
}

message GetImplementationSourceResponse {
  string json = 1;
}

message ApplyImplementationSourceRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyImplementationSourceResponse {
  string json = 1;
}

message DeleteImplementationSourceRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteImplementationSourceResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListMemoriesRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListMemoriesResponse {
  string json = 1;
}

message GetMemoryRequest {
  string namespace = 1;
  string name = 2;
}

message GetMemoryResponse {
  string json = 1;
}

message ApplyMemoryRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyMemoryResponse {
  string json = 1;
}

message DeleteMemoryRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteMemoryResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListToolsRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListToolsResponse {
  string json = 1;
}

message GetToolRequest {
  string namespace = 1;
  string name = 2;
}

message GetToolResponse {
  string json = 1;
}

message ApplyToolRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyToolResponse {
  string json = 1;
}

message DeleteToolRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteToolResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListToolRunsRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListToolRunsResponse {
  string json = 1;
}

message GetToolRunRequest {
  string namespace = 1;
  string name = 2;
}

message GetToolRunResponse {
  string json = 1;
}

message ApplyToolRunRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyToolRunResponse {
  string json = 1;
}

message DeleteToolRunRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteToolRunResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListOrchestrationsRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListOrchestrationsResponse {
  string json = 1;
}

message GetOrchestrationRequest {
  string namespace = 1;
  string name = 2;
}

message GetOrchestrationResponse {
  string json = 1;
}

message ApplyOrchestrationRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyOrchestrationResponse {
  string json = 1;
}

message DeleteOrchestrationRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteOrchestrationResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListOrchestrationRunsRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListOrchestrationRunsResponse {
  string json = 1;
}

message GetOrchestrationRunRequest {
  string namespace = 1;
  string name = 2;
}

message GetOrchestrationRunResponse {
  string json = 1;
}

message ApplyOrchestrationRunRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyOrchestrationRunResponse {
  string json = 1;
}

message DeleteOrchestrationRunRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteOrchestrationRunResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListApprovalPoliciesRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListApprovalPoliciesResponse {
  string json = 1;
}

message GetApprovalPolicyRequest {
  string namespace = 1;
  string name = 2;
}

message GetApprovalPolicyResponse {
  string json = 1;
}

message ApplyApprovalPolicyRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyApprovalPolicyResponse {
  string json = 1;
}

message DeleteApprovalPolicyRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteApprovalPolicyResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListBudgetsRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListBudgetsResponse {
  string json = 1;
}

message GetBudgetRequest {
  string namespace = 1;
  string name = 2;
}

message GetBudgetResponse {
  string json = 1;
}

message ApplyBudgetRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyBudgetResponse {
  string json = 1;
}

message DeleteBudgetRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteBudgetResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListSecretBindingsRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListSecretBindingsResponse {
  string json = 1;
}

message GetSecretBindingRequest {
  string namespace = 1;
  string name = 2;
}

message GetSecretBindingResponse {
  string json = 1;
}

message ApplySecretBindingRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplySecretBindingResponse {
  string json = 1;
}

message DeleteSecretBindingRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteSecretBindingResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListSignalsRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListSignalsResponse {
  string json = 1;
}

message GetSignalRequest {
  string namespace = 1;
  string name = 2;
}

message GetSignalResponse {
  string json = 1;
}

message ApplySignalRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplySignalResponse {
  string json = 1;
}

message DeleteSignalRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteSignalResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListSignalDeliveriesRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListSignalDeliveriesResponse {
  string json = 1;
}

message GetSignalDeliveryRequest {
  string namespace = 1;
  string name = 2;
}

message GetSignalDeliveryResponse {
  string json = 1;
}

message ApplySignalDeliveryRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplySignalDeliveryResponse {
  string json = 1;
}

message DeleteSignalDeliveryRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteSignalDeliveryResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListSchedulesRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListSchedulesResponse {
  string json = 1;
}

message GetScheduleRequest {
  string namespace = 1;
  string name = 2;
}

message GetScheduleResponse {
  string json = 1;
}

message ApplyScheduleRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyScheduleResponse {
  string json = 1;
}

message DeleteScheduleRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteScheduleResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListArtifactsRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListArtifactsResponse {
  string json = 1;
}

message GetArtifactRequest {
  string namespace = 1;
  string name = 2;
}

message GetArtifactResponse {
  string json = 1;
}

message ApplyArtifactRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyArtifactResponse {
  string json = 1;
}

message DeleteArtifactRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteArtifactResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListWorkspacesRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListWorkspacesResponse {
  string json = 1;
}

message GetWorkspaceRequest {
  string namespace = 1;
  string name = 2;
}

message GetWorkspaceResponse {
  string json = 1;
}

message ApplyWorkspaceRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyWorkspaceResponse {
  string json = 1;
}

message DeleteWorkspaceRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteWorkspaceResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message ListAgentRunsRequest {
  string namespace = 1;
  string label_selector = 2;
}

message ListAgentRunsResponse {
  string json = 1;
}

message GetAgentRunRequest {
  string namespace = 1;
  string name = 2;
}

message GetAgentRunResponse {
  string json = 1;
}

message ApplyAgentRunRequest {
  string namespace = 1;
  string manifest_yaml = 2;
}

message ApplyAgentRunResponse {
  string json = 1;
}

message DeleteAgentRunRequest {
  string namespace = 1;
  string name = 2;
}

message DeleteAgentRunResponse {
  bool ok = 1;
  string message = 2;
  string json = 3;
}

message StreamAgentRunLogsRequest {
  string namespace = 1;
  string name = 2;
  bool follow = 3;
}

message StreamAgentRunLogsResponse {
  string stream = 1;
  string message = 2;
}
