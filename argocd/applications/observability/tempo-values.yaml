gateway:
  enabled: true

global:
  extraEnv:
    - name: TEMPO_ACCESS_KEY
      valueFrom:
        secretKeyRef:
          name: observability-minio-credentials
          key: tempoAccessKey
    - name: TEMPO_SECRET_KEY
      valueFrom:
        secretKeyRef:
          name: observability-minio-credentials
          key: tempoSecretKey
  extraArgs:
    - -config.expand-env=true

tempo:
  traces:
    otlp:
      http:
        enabled: true
      grpc:
        enabled: true
  distributor:
    replicas: 1
  ingester:
    replicas: 2
    persistence:
      enabled: true
      size: 20Gi
      storageClass: longhorn
  compactor:
    replicas: 1
    persistence:
      enabled: true
      size: 20Gi
      storageClass: longhorn
  querier:
    replicas: 1
  queryFrontend:
    replicas: 1
  storage:
    trace:
      backend: s3
      s3:
        endpoint: http://observability-minio.minio.svc.cluster.local:9000
        bucket: tempo-traces
        access_key: ${TEMPO_ACCESS_KEY}
        secret_key: ${TEMPO_SECRET_KEY}
        insecure: true
        s3forcepathstyle: true
