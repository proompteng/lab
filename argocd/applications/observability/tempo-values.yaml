gateway:
  enabled: true

global:
  extraEnv:
    - name: OBS_S3_ACCESS_KEY
      valueFrom:
        secretKeyRef:
          name: rook-ceph-rgw-loki
          key: accessKey
    - name: OBS_S3_SECRET_KEY
      valueFrom:
        secretKeyRef:
          name: rook-ceph-rgw-loki
          key: secretKey
    - name: OBS_S3_ENDPOINT
      valueFrom:
        secretKeyRef:
          name: rook-ceph-rgw-loki
          key: endpoint
    - name: OBS_S3_BUCKET
      valueFrom:
        secretKeyRef:
          name: rook-ceph-rgw-loki
          key: bucket

traces:
  otlp:
    http:
      enabled: true
    grpc:
      enabled: true

distributor:
  replicas: 1
  extraArgs:
    - -config.expand-env=true

ingester:
  replicas: 2
  persistence:
    enabled: false
  extraArgs:
    - -config.expand-env=true

compactor:
  replicas: 1
  persistence:
    enabled: true
    size: 20Gi
    storageClass: rook-ceph-block
  extraArgs:
    - -config.expand-env=true

querier:
  replicas: 1
  extraArgs:
    - -config.expand-env=true

queryFrontend:
  replicas: 1
  extraArgs:
    - -config.expand-env=true

storage:
  trace:
    backend: s3
    s3:
      endpoint: ${OBS_S3_ENDPOINT}
      bucket: ${OBS_S3_BUCKET}
      access_key: ${OBS_S3_ACCESS_KEY}
      secret_key: ${OBS_S3_SECRET_KEY}
      insecure: true
      forcepathstyle: true
