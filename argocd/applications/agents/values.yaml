replicaCount: 1
image:
  repository: registry.ide-newton.ts.net/lab/jangar
  tag: 93eeaa3f
  digest: sha256:3aa8685dbd6a8642dfe887c443727ac0c0e9b0bbc1c6080a55f225e068769b1a
  pullPolicy: IfNotPresent
controlPlane:
  image:
    repository: registry.ide-newton.ts.net/lab/jangar-control-plane
    tag: 93eeaa3f
    digest: sha256:3e235465a645caeb785bdfad642628faf4704e45d237d0f2d189c5bc2d6843b3
  env:
    vars:
      JANGAR_CONTROL_PLANE_CACHE_ENABLED: "true"
runner:
  image:
    repository: registry.ide-newton.ts.net/lab/jangar
    tag: 93eeaa3f
    digest: sha256:3aa8685dbd6a8642dfe887c443727ac0c0e9b0bbc1c6080a55f225e068769b1a
controllers:
  enabled: true
  replicaCount: 2
  autoscaling:
    enabled: false
  env:
    vars:
      JANGAR_AGENT_RUNNER_NATS_AUTH_SECRET_NAME: nats-agents-credentials
      JANGAR_AGENT_RUNNER_NATS_AUTH_USERNAME_KEY: username
      JANGAR_AGENT_RUNNER_NATS_AUTH_PASSWORD_KEY: password
      JANGAR_WHITEPAPER_FINALIZE_ENABLED: "true"
      JANGAR_WHITEPAPER_FINALIZE_BASE_URL: http://torghut.torghut.svc.cluster.local
      JANGAR_WHITEPAPER_FINALIZE_USE_SERVICE_ACCOUNT_TOKEN: "true"
resources:
  requests:
    cpu: 200m
    memory: 512Mi
controller:
  namespaces:
    - agents
  jobTtlSeconds: 86400
  jobTtlSecondsAfterFinished: 86400
  logRetentionSeconds: 604800
  authSecret:
    name: codex-auth
    key: auth.json
    mountPath: /root/.codex
rbac:
  clusterScoped: true
  extraRules:
    - apiGroups:
        - apiextensions.k8s.io
      resources:
        - customresourcedefinitions
      verbs:
        - get
        - list
        - watch
    - apiGroups:
        - ""
      resources:
        - services
      verbs:
        - get
        - list
        - watch
database:
  secretRef:
    name: jangar-db-app
    key: uri
agentComms:
  enabled: false
grpc:
  enabled: true
  port: 50051
  servicePort: 50051
  serviceType: ClusterIP
env:
  vars:
    JANGAR_GRPC_ENABLED: "true"
    JANGAR_GRPC_HOST: 0.0.0.0
    JANGAR_GRPC_PORT: "50051"
    JANGAR_GITHUB_REPOS_ALLOWED: proompteng/lab
    JANGAR_AGENTS_CONTROLLER_REPO_CONCURRENCY_OVERRIDES: "{}"
  secrets:
    - name: GITHUB_TOKEN
      secretName: github-token
      key: token
envFromSecretRefs: []
