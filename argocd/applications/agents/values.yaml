replicaCount: 1
image:
  repository: registry.ide-newton.ts.net/lab/jangar
  tag: 74381f4d
  digest: sha256:6d82b3717b5f14686eb900af3111a16109de983a76c7aad27ed85b63165d1694
  pullPolicy: IfNotPresent
controlPlane:
  image:
    repository: registry.ide-newton.ts.net/lab/jangar-control-plane
    tag: 5436c9d2
    digest: sha256:b511d73a2622ea3a4f81f5507899bca1970a0e7b6a9742b42568362f1d682b9a
  env:
    vars:
      JANGAR_CONTROL_PLANE_CACHE_ENABLED: "true"
runner:
  image:
    repository: registry.ide-newton.ts.net/lab/codex-universal
    tag: 5436c9d2
    digest: sha256:ff8e864d9ad6319fd46629f340c046370fd10cc9b2f31e7ddc100124a080e3f8
controllers:
  enabled: true
  autoscaling:
    enabled: false
  env:
    vars:
      # Used to inject NATS auth into runner Jobs (for codex-nats-publish).
      JANGAR_AGENT_RUNNER_NATS_AUTH_SECRET_NAME: nats-agents-credentials
      JANGAR_AGENT_RUNNER_NATS_AUTH_USERNAME_KEY: username
      JANGAR_AGENT_RUNNER_NATS_AUTH_PASSWORD_KEY: password
resources:
  requests:
    cpu: 200m
    memory: 512Mi
controller:
  namespaces:
    - agents
rbac:
  clusterScoped: false
database:
  secretRef:
    name: jangar-db-app
    key: uri
agentComms:
  enabled: false
grpc:
  enabled: true
  port: 50051
  servicePort: 50051
  serviceType: ClusterIP
env:
  vars:
    JANGAR_GRPC_ENABLED: "true"
    JANGAR_GRPC_HOST: 0.0.0.0
    JANGAR_GRPC_PORT: "50051"
    JANGAR_GITHUB_REPOS_ALLOWED: proompteng/lab
    # Controllers image currently expects this env var to be present; when unset it can crash on startup.
    # Safe default: no per-repo override map.
    JANGAR_AGENTS_CONTROLLER_REPO_CONCURRENCY_OVERRIDES: "{}"
envFromSecretRefs:
  - agents-github-token-env
