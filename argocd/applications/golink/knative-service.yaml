apiVersion: serving.knative.dev/v1
kind: Service
metadata:
  name: golink
  namespace: golink
  labels:
    app.kubernetes.io/name: golink
    app.kubernetes.io/part-of: lab
  annotations:
    serving.knative.dev/rollout-duration: 10s
    argocd.argoproj.io/tracking-id: golink:serving.knative.dev/Service:golink/golink
spec:
  template:
    metadata:
      annotations:
        autoscaling.knative.dev/minScale: "0"
        client.knative.dev/updateTimestamp: 2025-11-30T00:00:00Z
    spec:
      containerConcurrency: 0
      timeoutSeconds: 60
      containers:
        - name: user-container
          image: registry.ide-newton.ts.net/lab/golink:latest
          imagePullPolicy: Always
          ports:
            - name: http1
              containerPort: 3000
          env:
            - name: PORT
              value: "3000"
            - name: GOLINK_DATABASE_URL
              valueFrom:
                secretKeyRef:
                  name: golink-db-app
                  key: uri
            - name: GOLINK_VERSION
              value: dev
            - name: GOLINK_COMMIT
              value: dev
          resources:
            requests:
              cpu: 100m
              memory: 128Mi
            limits:
              cpu: 300m
              memory: 256Mi
