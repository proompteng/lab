apiVersion: agents.proompteng.ai/v1alpha1
kind: AgentProvider
metadata:
  name: jangar-primitives-codex
  namespace: jangar
spec:
  binary: /bin/sh
  argsTemplate:
    - -c
    - >-
        mkdir -p /workspace/lab &&
        echo "agent run repo={{parameters.repository}} base={{parameters.base}} head={{parameters.head}} stage={{parameters.stage}}" |
        tee /workspace/lab/.codex-implementation.log
  envTemplate:
    WORKFLOW_STAGE: "{{parameters.stage}}"
  inputFiles:
    - path: /workspace/agent/prompt.json
      content: "{{agent.config.payloads.promptJson}}"
  outputArtifacts:
    - name: implementation-log
      path: /workspace/lab/.codex-implementation.log
