apiVersion: agents.proompteng.ai/v1alpha1
kind: AgentProvider
metadata:
  name: jangar-primitives-codex
  namespace: jangar
spec:
  binary: /bin/sh
  argsTemplate:
    - -c
    - >-
        mkdir -p /workspace/lab &&
        echo "agent run repo={{inputs.repository}} base={{inputs.base}} head={{inputs.head}} stage={{inputs.stage}}" |
        tee /workspace/lab/.codex-implementation.log
  envTemplate:
    WORKFLOW_STAGE: "{{inputs.stage}}"
  inputFiles:
    - path: /workspace/agent/prompt.json
      content: "{{payloads.promptJson}}"
  outputArtifacts:
    - name: implementation-log
      path: /workspace/lab/.codex-implementation.log
