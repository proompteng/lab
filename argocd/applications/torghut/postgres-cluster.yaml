apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
  name: torghut-db
  namespace: torghut
spec:
  instances: 1
  primaryUpdateStrategy: unsupervised
  storage:
    storageClass: rook-ceph-block
    size: 5Gi
  bootstrap:
    initdb:
      database: torghut
      owner: torghut_app
      encoding: "UTF8"
      dataChecksums: true
  inheritedMetadata:
    annotations:
      reflector.v1.k8s.emberstack.com/reflection-allowed: "true"
      reflector.v1.k8s.emberstack.com/reflection-allowed-namespaces: "pgadmin,jangar"
      reflector.v1.k8s.emberstack.com/reflection-auto-enabled: "true"
      reflector.v1.k8s.emberstack.com/reflection-auto-namespaces: "pgadmin,jangar"
  monitoring:
    enablePodMonitor: true
# CNPG will emit application credentials in `torghut-db-app` (uri, user, password, host, port, dbname)
